# YaMDb API

## Описание
YaMDb собирает отзывы пользователей на различные произведения (фильмы, книги, музыку и т. д.).

## Начало работы
Все запросы к API начинаются с `/api/v1/`.

## Установка и запуск проекта
1. Клонируйте репозиторий:
    ```sh
    git clone https://github.com/Svetlana-Korol/api_yamdb.git
    cd yamdb
    ```
2. Установите виртуальное окружение и зависимости:
    ```sh
    python -m venv venv
    source venv/bin/activate  # для MacOS/Linux
    venv\Scripts\activate  # для Windows
    pip install -r requirements.txt
    ```
3. Примените миграции и создайте суперпользователя:
    ```sh
    python manage.py migrate
    python manage.py createsuperuser
    ```
4. Запустите сервер:
    ```sh
    python manage.py runserver
    ```

## Импорт данных из CSV
Проект содержит команду для загрузки данных из CSV-файлов, расположенных в `static/data`. Чтобы выполнить импорт данных, используйте:
```sh
python manage.py load_csv_data
```

## Алгоритм регистрации пользователей
1. Пользователь отправляет POST-запрос на `/api/v1/auth/signup/` с `email` и `username`.
2. **YaMDB** отправляет код подтверждения (`confirmation_code`) на указанный `email`.
3. Пользователь отправляет POST-запрос на `/api/v1/auth/token/` с `username` и `confirmation_code`, получает JWT-токен.
4. Пользователь может обновить данные профиля через PATCH-запрос `/api/v1/users/me/`.

## Роли пользователей
- **Аноним** – может только просматривать контент.
- **Аутентифицированный пользователь** (`user`) – может оставлять отзывы, комментировать, ставить оценки.
- **Модератор** (`moderator`) – может удалять чужие отзывы и комментарии.
- **Администратор** (`admin`) – имеет полный доступ к управлению контентом и пользователями.
- **Суперюзер Django** – обладает правами администратора (`admin`).

## Основные эндпоинты API


### Аутентификация
| Эндпоинт | Метод | Описание |
|----------|--------|-------------------------------|
| `/auth/signup/` | `POST` | Регистрация нового пользователя |
| `/auth/token/` | `POST` | Получение JWT-токена |

### Категории и жанры
| Эндпоинт | Метод | Описание |
|----------|--------|----------------------------------|
| `/categories/` | `GET`, `POST`, `DELETE` | Управление категориями произведений |
| `/genres/` | `GET`, `POST`, `DELETE` | Управление жанрами |

### Произведения и отзывы
| Эндпоинт | Метод | Описание |
|----------|--------|---------------------------------------------|
| `/titles/` | `GET`, `POST`, `PATCH`, `DELETE` | Управление произведениями |
| `/titles/{title_id}/reviews/` | `GET`, `POST` | Просмотр и добавление отзывов |
| `/titles/{title_id}/reviews/{review_id}/` | `GET`, `PATCH`, `DELETE` | Просмотр, редактирование и удаление отзыва |

### Комментарии
| Эндпоинт | Метод | Описание |
|----------|--------|--------------------------------------------|
| `/titles/{title_id}/reviews/{review_id}/comments/` | `GET`, `POST` | Просмотр и добавление комментариев к отзывам |
| `/titles/{title_id}/reviews/{review_id}/comments/{comment_id}/` | `GET`, `PATCH`, `DELETE` | Управление комментариями |

### Пользователи
| Эндпоинт | Метод | Описание |
|----------|--------|--------------------------------------|
| `/users/` | `GET`, `POST` | Управление пользователями (только для админов) |
| `/users/{username}/` | `GET`, `PATCH`, `DELETE` | Управление конкретным пользователем |
| `/users/me/` | `GET`, `PATCH` | Просмотр и редактирование своего профиля |

## Авторизация
Все запросы, требующие авторизации, используют JWT-токен, передаваемый в заголовке `Authorization: Bearer <your_token>`.

## Запуск тестов
Проект содержит тесты, которые можно запустить с помощью:
```sh
pytest
```

## Лицензия
Проект распространяется под лицензией MIT.:)

## Документация

Документация API доступна по адресу:
[Redoc](http://localhost:8000/api/redoc/)

## Авторы
Тим Лид & Разработчик: Светлана Король
Разработчик: Армен Айранджян
Разработчик: Максим Брицин

## Технологии

asgiref==3.8.1
attrs==25.1.0
certifi==2025.1.31
charset-normalizer==2.0.12
Django==3.2
django-filter==2.4.0
djangorestframework==3.12.4
djangorestframework-simplejwt==5.0.0
idna==3.10
iniconfig==2.0.0
numpy==2.2.3
packaging==24.2
pandas==2.2.3
pluggy==1.0.0.dev0
py==1.11.0
PyJWT==2.1.0
pytest==6.2.4
pytest-django==4.4.0
pytest-pythonpath==0.7.3
python-dateutil==2.9.0.post0
pytz==2025.1
requests==2.26.0
six==1.17.0
sqlparse==0.5.3
toml==0.10.2
typing_extensions==4.12.2
tzdata==2025.1
urllib3==1.26.20